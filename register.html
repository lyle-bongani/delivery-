<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0d6efd">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Register - Delivery App</title>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
</head>

<body>
    <div class="auth-container">
        <div class="auth-card fade-in">
            <!-- Mobile Header -->
            <header class="mobile-header d-md-none">
                <button class="mobile-header-btn" onclick="window.location.href='index.html'">
                    <i class="bi bi-arrow-left"></i>
                </button>
                <h1 class="mobile-header-title">Create Account</h1>
                <div style="width: 44px;"></div> <!-- Spacer for alignment -->
            </header>

            <div class="text-center mb-4">
                <img src="assets/logo.png" alt="Delivery App Logo" class="auth-logo">
                <h2 class="auth-title d-none d-md-block">Create Account</h2>
                <p class="text-muted d-none d-md-block">Join us to start ordering</p>
            </div>

            <form id="registerForm" class="auth-form mobile-form">
                <div class="mobile-form-group">
                    <label for="firstName" class="mobile-form-label">First Name</label>
                    <div class="mobile-search">
                        <i class="bi bi-person mobile-search-icon"></i>
                        <input type="text" class="mobile-form-control" id="firstName" placeholder="Enter first name"
                            required autocomplete="given-name">
                    </div>
                </div>

                <div class="mobile-form-group">
                    <label for="lastName" class="mobile-form-label">Last Name</label>
                    <div class="mobile-search">
                        <i class="bi bi-person mobile-search-icon"></i>
                        <input type="text" class="mobile-form-control" id="lastName" placeholder="Enter last name"
                            required autocomplete="family-name">
                    </div>
                </div>

                <div class="mobile-form-group">
                    <label for="email" class="mobile-form-label">Email address</label>
                    <div class="mobile-search">
                        <i class="bi bi-envelope mobile-search-icon"></i>
                        <input type="email" class="mobile-form-control" id="email" placeholder="Enter your email"
                            required autocomplete="email">
                    </div>
                    <div class="form-text">We'll never share your email with anyone else.</div>
                </div>

                <div class="mobile-form-group">
                    <label for="phone" class="mobile-form-label">Phone Number</label>
                    <div class="mobile-search">
                        <i class="bi bi-phone mobile-search-icon"></i>
                        <input type="tel" class="mobile-form-control" id="phone" placeholder="Enter your phone number"
                            required autocomplete="tel" pattern="[0-9]{10}" inputmode="numeric">
                    </div>
                </div>

                <div class="mobile-form-group">
                    <label for="address" class="mobile-form-label">Address</label>
                    <div class="mobile-search">
                        <i class="bi bi-geo-alt mobile-search-icon"></i>
                        <input type="text" class="mobile-form-control" id="address" placeholder="Enter your address"
                            required autocomplete="street-address">
                    </div>
                </div>

                <div class="mobile-form-group">
                    <label for="password" class="mobile-form-label">Password</label>
                    <div class="mobile-search">
                        <i class="bi bi-lock mobile-search-icon"></i>
                        <input type="password" class="mobile-form-control" id="password" placeholder="Create password"
                            required autocomplete="new-password" minlength="8">
                        <button class="mobile-header-btn" type="button" id="togglePassword">
                            <i class="bi bi-eye"></i>
                        </button>
                    </div>
                </div>

                <div class="mobile-form-group">
                    <label for="confirmPassword" class="mobile-form-label">Confirm Password</label>
                    <div class="mobile-search">
                        <i class="bi bi-lock mobile-search-icon"></i>
                        <input type="password" class="mobile-form-control" id="confirmPassword"
                            placeholder="Confirm password" required autocomplete="new-password">
                        <button class="mobile-header-btn" type="button" id="toggleConfirmPassword">
                            <i class="bi bi-eye"></i>
                        </button>
                    </div>
                </div>

                <div class="mobile-form-group">
                    <div class="form-check">
                        <input type="checkbox" class="form-check-input" id="termsCheck" required>
                        <label class="form-check-label" for="termsCheck">
                            I agree to the
                            <button type="button" class="btn btn-link p-0" data-bs-toggle="modal"
                                data-bs-target="#termsModal">
                                Terms of Service
                            </button>
                            and
                            <button type="button" class="btn btn-link p-0" data-bs-toggle="modal"
                                data-bs-target="#privacyModal">
                                Privacy Policy
                            </button>
                        </label>
                    </div>
                </div>

                <button type="submit" class="mobile-btn">
                    <i class="bi bi-person-plus me-2"></i>Create Account
                </button>

                <div class="auth-links mobile-text-center">
                    <p class="mb-0">Already have an account? <a href="index.html"
                            class="mobile-btn mobile-btn-secondary">Sign in</a></p>
                </div>
            </form>

            <!-- Terms of Service Modal -->
            <div class="modal fade" id="termsModal" tabindex="-1">
                <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Terms of Service</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <h6>1. Acceptance of Terms</h6>
                            <p>By accessing and using this delivery app, you accept and agree to be bound by the terms
                                and provision of this agreement.</p>

                            <h6>2. Use License</h6>
                            <p>Permission is granted to temporarily use this app for personal, non-commercial transitory
                                viewing only.</p>

                            <h6>3. User Account</h6>
                            <p>You are responsible for maintaining the confidentiality of your account and password.</p>

                            <h6>4. Delivery Services</h6>
                            <p>We strive to provide accurate delivery times, but we cannot guarantee exact delivery
                                times due to various factors.</p>

                            <h6>5. Payment Terms</h6>
                            <p>All payments must be made in full before delivery. We accept various payment methods as
                                indicated during checkout.</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="mobile-btn mobile-btn-secondary"
                                data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Privacy Policy Modal -->
            <div class="modal fade" id="privacyModal" tabindex="-1">
                <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Privacy Policy</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <h6>1. Information We Collect</h6>
                            <p>We collect information that you provide directly to us, including your name, email
                                address, phone number, and delivery address.</p>

                            <h6>2. How We Use Your Information</h6>
                            <p>We use the information we collect to provide, maintain, and improve our services, to
                                process your orders, and to communicate with you.</p>

                            <h6>3. Information Sharing</h6>
                            <p>We do not share your personal information with third parties except as described in this
                                privacy policy.</p>

                            <h6>4. Data Security</h6>
                            <p>We take reasonable measures to help protect your personal information from loss, theft,
                                misuse, and unauthorized access.</p>

                            <h6>5. Your Rights</h6>
                            <p>You have the right to access, correct, or delete your personal information. You can also
                                opt-out of marketing communications.</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="mobile-btn mobile-btn-secondary"
                                data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div class="spinner-overlay" style="display: none;">
        <div class="spinner"></div>
    </div>

    <script src="bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="js/auth.js"></script>
    <script>
        // Prevent zoom on input focus for iOS
        document.addEventListener('touchstart', function (event) {
            if (event.touches.length > 1) {
                event.preventDefault();
            }
        }, { passive: false });

        // Toggle password visibility with better mobile UX
        function setupPasswordToggle(buttonId, inputId) {
            document.getElementById(buttonId).addEventListener('click', function (e) {
                e.preventDefault();
                const passwordInput = document.getElementById(inputId);
                const icon = this.querySelector('i');

                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.classList.remove('bi-eye');
                    icon.classList.add('bi-eye-slash');
                } else {
                    passwordInput.type = 'password';
                    icon.classList.remove('bi-eye-slash');
                    icon.classList.add('bi-eye');
                }

                // Prevent form submission
                return false;
            });
        }

        setupPasswordToggle('togglePassword', 'password');
        setupPasswordToggle('toggleConfirmPassword', 'confirmPassword');

        // Show loading spinner during form submission with mobile optimization
        document.getElementById('registerForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const spinner = document.querySelector('.spinner-overlay');
            spinner.style.display = 'flex';

            // Simulate form submission (replace with actual registration logic)
            setTimeout(() => {
                spinner.style.display = 'none';
                // Add your registration logic here
            }, 1000);
        });

        // Password validation with mobile feedback
        document.getElementById('confirmPassword').addEventListener('input', function () {
            const password = document.getElementById('password').value;
            const confirmPassword = this.value;

            if (password !== confirmPassword) {
                this.setCustomValidity('Passwords do not match');
                this.classList.add('is-invalid');
            } else {
                this.setCustomValidity('');
                this.classList.remove('is-invalid');
            }
        });

        // Phone number validation with mobile optimization
        document.getElementById('phone').addEventListener('input', function () {
            const phoneRegex = /^\+?[\d\s-]{10,}$/;
            if (!phoneRegex.test(this.value)) {
                this.setCustomValidity('Please enter a valid phone number');
                this.classList.add('is-invalid');
            } else {
                this.setCustomValidity('');
                this.classList.remove('is-invalid');
            }
        });

        // Handle mobile keyboard
        const inputs = document.querySelectorAll('input');
        inputs.forEach(input => {
            input.addEventListener('focus', () => {
                setTimeout(() => {
                    input.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 300);
            });
        });

        // Mobile-friendly form validation
        document.getElementById('registerForm').addEventListener('submit', function (e) {
            e.preventDefault();

            // Check if passwords match
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            if (password !== confirmPassword) {
                // Show mobile-friendly error message
                const alert = document.createElement('div');
                alert.className = 'alert alert-danger mobile-m-2';
                alert.innerHTML = 'Passwords do not match';
                this.insertBefore(alert, this.firstChild);

                // Remove alert after 3 seconds
                setTimeout(() => alert.remove(), 3000);
                return;
            }

            // Continue with form submission
            this.submit();
        });
    </script>
</body>

</html>